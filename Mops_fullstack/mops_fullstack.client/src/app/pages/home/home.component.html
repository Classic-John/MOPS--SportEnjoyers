<app-centered>
  <mat-card content class="form_card">
    <mat-card-header>
      <mat-card-title>Welcome, {{loggedInPlayer()!.name}}</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="updatePlayerForm" id="updatePlayerForm"  (ngSubmit)="updatePlayer(updatePlayerForm.getRawValue())">
        <div class="form_field">
          <mat-form-field>
            <mat-label>Update name</mat-label>
            <input matInput maxlength="15" formControlName="name" />
          </mat-form-field>
        </div>
        <div class="form_field">
          <mat-form-field>
            <mat-label>Update age</mat-label>
            <input matInput type="number" min="16" formControlName="age" />
          </mat-form-field>
        </div>
        <div class="form_field">
          <mat-form-field>
            <mat-label>Old password</mat-label>
            <input matInput formControlName="oldPassword" [type]="oldPasswordVisible ? 'text' : 'password'"/>
            <button type="button" mat-icon-button matSuffix (click)="toggleOldPasswordVisible()" [attr.aria-pressed]="!oldPasswordVisible">
              <mat-icon>{{oldPasswordVisible ? 'visibility' : 'visibility_off'}}</mat-icon>
            </button>
          </mat-form-field>
        </div>
        <div class="form_field">
          <mat-form-field>
            <mat-label>New password</mat-label>
            <input matInput formControlName="password" [type]="passwordVisible ? 'text' : 'password'" />
            <button type="button" mat-icon-button matSuffix (click)="togglePasswordVisible()" [attr.aria-pressed]="!passwordVisible">
              <mat-icon>{{passwordVisible ? 'visibility' : 'visibility_off'}}</mat-icon>
            </button>
          </mat-form-field>
        </div>
        <div class="form_field">
          <mat-form-field>
            <mat-label>Confirm new password</mat-label>
            <input matInput formControlName="passwordConfirm" [type]="passwordConfirmationVisible ? 'text' : 'password'" />
            <button type="button" mat-icon-button matSuffix (click)="togglePasswordConfirmationVisible()" [attr.aria-pressed]="!passwordConfirmationVisible">
              <mat-icon>{{passwordConfirmationVisible ? 'visibility' : 'visibility_off'}}</mat-icon>
            </button>
          </mat-form-field>
        </div>
      </form>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button type="submit" form="updatePlayerForm" [disabled]="!updatePlayerForm.valid">Update data</button>
      <button mat-button (click)="deleteAccount()">Delete account</button>
    </mat-card-actions>
  </mat-card>
</app-centered>

